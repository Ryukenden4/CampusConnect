<!DOCTYPE html>
<html lang="en">

<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>College InfoCenter</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="/intermediate/css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="/intermediate/css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="css/responsive.css">
    <!-- font css -->
    <link href="https://fonts.googleapis.com/css2?family=Sen:wght@400;700;800&display=swap" rel="stylesheet">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- header -->
    <link rel="stylesheet" href="/intermediate/header.css">
    <link rel="stylesheet" href="/homepage/assets/css/maicons.css">
    <link rel="stylesheet" href="/homepage/assets/css/theme.css">   
    <link rel="stylesheet" href="/homepage/assets/vendor/owl-carousel/css/owl.carousel.css">
    <link rel="stylesheet" href="/customerSupport/css/style.css">
    <!--search icon-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-Gn5384xqQ1eXdCr5J+C6Pqab5J3Ad0/4+MVjFz4e4mIpyz28F+J5iu20uITZjH9z/50DBLweUw5QqfyOv1RgSw==">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-Gn5384xqQ1eXdCr5J+C6Pqab5J3Ad0/4+MVjFz4e4mIpyz28F+J5iu20uITZjH9z/50DBLweUw5QqfyOv1RgSw==">

    <style>

      .button2{
        background-color: #8b0000;
        border: 1px;
        color: rgb(255, 255, 255);
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 5px;
        width: 7cm;
      }

      .button1{
        background-color: #007bff;
        border: 1px;
        color: rgb(255, 255, 255);
        padding: 10px 20px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        margin: 4px 2px;
        cursor: pointer;
        border-radius: 5px;
        width: 7cm;
      }
      
      button:hover{
        background-color: white;
        color: black;
      }

    table {
        border-collapse: collapse;
        border-spacing: 0;
        width: 100%;
        border: 1px solid #ddd;
    }

    th, td {
        text-align: left;
        padding: 16px;
    }

    tr:nth-child(even) {
        background-color: transparent;
    }

    .center {
        margin-left: auto;
        margin-right: auto;
    }

    input[type=text] {
        width: 130px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        background-image: url('searchicon.png');
        background-position: 10px 10px; 
        background-repeat: no-repeat;
        padding: 12px 20px 12px 40px;
        -webkit-transition: width 0.4s ease-in-out;
        transition: width 0.4s ease-in-out;
    }

    input[type=text]:focus {
        width: 100%;
    

      .h1{
        color: #fcfcfc;
        text-align: center;
        font-size: 70px;
        position: relative;
      }

      #myInput {
        background-image: url('/css/searchicon.png');
        background-position: 10px 10px;
        background-repeat: no-repeat;
        width: 100%;
        font-size: 16px;
        padding: 12px 20px 12px 40px;
        border: 1px solid #ddd;
        margin-bottom: 12px;
      }

      #myTable {
        border-collapse: collapse;
        width: 100%;
        border: 1px solid #ddd;
        font-size: 25px;
      }

      #myTable th, #myTable td {
        text-align: left;
        padding: 12px;
      }

      #myTable tr {
        border-bottom: 1px solid #ddd;
      }

      #myTable tr.header, #myTable tr:hover {
        background-color: transparent;
      }
    }

    .table__header {
    width: 30cm;
    height: 10%;
    background-color: #fff4;
    padding: .8rem 1rem;

    display: flex;
    justify-content: space-between;
    align-items: center;
}

.table__header .input-group {
    width: 35%;
    height: 100%;
    background-color: #fff5;
    padding: 0 .8rem;
    border-radius: 2rem;

    display: flex;
    justify-content: center;
    align-items: center;

    transition: .2s;
}

.table__header .input-group:hover {
    width: 45%;
    background-color: #fff8;
    box-shadow: 0 .1rem .4rem #0002;
}

.table__header .input-group img {
    width: 1.2rem;
    height: 1.2rem;
}

.table__header .input-group input {
    width: 100%;
    padding: 0 .5rem 0 .3rem;
    background-color: transparent;
    border: none;
    outline: none;
}

.table__body {
    width: 98%;
    max-height: calc(89% - 1.6rem);
    background-color: #fffb;
    margin: .8rem auto;
    border-radius: .6rem;

    overflow: auto;
    overflow: overlay;
}

.table__body::-webkit-scrollbar{
    width: 0.5rem;
    height: 0.5rem;
}

.table__body::-webkit-scrollbar-thumb{
    border-radius: .5rem;
    background-color: #0004;
    visibility: hidden;
}

.table__body:hover::-webkit-scrollbar-thumb{ 
    visibility: visible;
}

table {
    width: 100%;
}

td img {
    width: 36px;
    height: 36px;
    margin-right: .5rem;
    border-radius: 50%;

    vertical-align: middle;
}

table, th, td {
    border-collapse: collapse;
    padding: 1rem;
    text-align: left;
}

thead th {
    position: sticky;
    top: 0;
    left: 0;
    background-color: #d5d1defe;
    cursor: pointer;
    text-transform: capitalize;
}

tbody tr:nth-child(even) {
    background-color: #0000000b;
}

tbody tr {
    --delay: .1s;
    transition: .5s ease-in-out var(--delay), background-color 0s;
}

tbody tr.hide {
    opacity: 0;
    transform: translateX(100%);
}

tbody tr:hover {
    background-color: #fff6 !important;
}

tbody tr td,
tbody tr td p,
tbody tr td img {
    transition: .2s ease-in-out;
}

tbody tr.hide td,
tbody tr.hide td p {
    padding: 0;
    font: 0 / 0 sans-serif;
    transition: .2s ease-in-out .5s;
}

tbody tr.hide td img {
    width: 0;
    height: 0;
    transition: .2s ease-in-out .5s;
}

main.table {
    width: auto; /* Set the width to auto */
    height: 90vh;
    background-color: #fff5;

    backdrop-filter: blur(7px);
    box-shadow: 0 .4rem .8rem #0005;
    border-radius: .8rem;

    overflow: hidden;
}

.heading-container {
  margin-top: 2cm;
}

.response-heading {
  font-size: 45px;
  color: #f1f1f1;
  margin-bottom: 20px; /* Add some spacing below the heading */
  font-weight: bold; /* Make the text bold */
  font-family: 'Arial', sans-serif; /* Change the font family */
}

.highlight-text {
  background: linear-gradient(90deg, #007bff, #ffffff); /* Add a gradient background for a highlight effect */
  background-clip: text;
  -webkit-background-clip: text;
  color: transparent;
  display: inline;
}

    </style>
</head>

<body style="background-color: #fcfcfc;">

  <header>
    <nav class="navbar navbar-expand-lg navbar-light shadow-sm">
        <div class="container">
            <a class="navbar-brand" href="/intermediate/staff.html"><span class="text-primary">College</span> InfoCenter</a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupport" aria-controls="navbarSupport" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarSupport">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item ">
                        <a class="nav-link" href="/intermediate/staff.html" style="font-size: 14px;">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="registrationDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="font-size: 14px;">
                            Registration
                        </a>
                        <div class="dropdown-menu" aria-labelledby="registrationDropdown">
                            <a class="dropdown-item" href="/collegeRegistration/admin/staff.html">College Student Namelist</a>
                            <a class="dropdown-item" href="/programRegistration/staff.html">Programme Registration</a>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link"  href="/facilitiesBooking/html/admin.html" style="font-size: 14px;">Facilities Booking</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active"  href="/customerSupport/html/admin.html" style="font-size: 14px;">Customer Support</a>
                    </li>
                    <!-- Add this within your navigation bar where you want the logout button to appear -->
                    <li class="nav-item">
                        <form action="/logout/logout.php" method="post">
                            <input type="submit" class="btn btn-primary ml-lg-3" style="background-color: #8b0000;" value="Logout">
                        </form>
                    </li>
                </ul>
            </div> <!-- .navbar-collapse -->
        </div> <!-- .container -->
    </nav>
</header>

<div class="page-banner overlay-dark bg-image" style="background-image: url(../assets/img/bk.jpeg); height:30cm;">
    <div class="banner-section">
        <div class="container text-center wow fadeInUp">
            <h1 class="response-heading">
                <span class="highlight-text">CUSTOMER RESPONSE LIST</span>
            </h1>

            <form id="dateSearchForm" style="margin-bottom: 1cm; font-size: 15px;">
                <label style="font-size: 18px;" for="search_month">Search by Month:</label>
                <input type="month" id="search_month" name="search_month" required>
                <p></p>
                <button type="button" class="button2" style="width:4cm; background-color: #007bff;" onclick="filterData()">Search</button>
                <button type="button" class="button2" style="width:4cm; background-color: #8b0000;" onclick="resetDisplay()">Reset</button>
            </form>

            <main class="table">
                <section class="table__header">
                   
                    <!-- Add these input fields to your existing code -->
                    <input type="text" id="filterById" oninput="filterTable()" placeholder="&#xF002; Response ID..." style="width: 7cm; font-family: 'FontAwesome';">
                    <input type="text" id="filterByName" oninput="filterTable()" placeholder="&#xF002; Name..." style="width: 7cm; font-family: 'FontAwesome'; ">
                    <input type="text" id="filterByTypeOfUser" oninput="filterTable()" placeholder="&#xF002; Type of User..." style="width: 7cm; font-family: 'FontAwesome';">
                    <input type="text" id="filterByPurpose" oninput="filterTable()" placeholder="&#xF002; Purpose..." style="width: 7cm; margin-right: 0.5cm; font-family: 'FontAwesome';">
                </section>
            
                <section class="table__body">
                    <table id="myTable">
                        
                        <!-- head for table -->
                        <thead>
                            <tr>
                                <th>Response ID</th>
                                <th>Full Name</th>
                                <th>Email</th>
                                <th style="width: 3cm">Type of User</th>
                                <th style="width: 3cm">Date</th>
                                <th>Purpose</th>
                                <th>Message</th>
                                <th>Action</th>
                            </tr>
                        </thead>
            
                        <!-- body for table -->
                        <tbody id="typeOfUser">
                            <!-- data will be fetch from staff1.php to display dynamically -->
                        </tbody>
                    </table>
                </section>
            </main>

            <button type="button" class="button1" onclick="printTable()">Print Record</button>
            <p><a class="nav-link" href="admin.html"><button type="button" class="button2">Back To Menu</button></a></p>
     
      <!-- JavaScript to handle date filtering -->
      <script>
        function filterData() {
            var selectedMonth = document.getElementById("search_month").value;

            // Use AJAX to send the selected month to the server (you need to implement this part)
            // For now, let's assume the server returns the filtered data in HTML format
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'datepick.php?search_month=' + selectedMonth, true);

            xhr.onload = function () {
                if (xhr.status == 200) {
                    // Update the content of tbody with the fetched data
                    document.getElementById('typeOfUser').innerHTML = xhr.responseText;
                }
            };

            xhr.send();
        }

        function resetDisplay() {
                        
                        document.getElementById("search_month").value = "";
                        
                        setTimeout(function () {
                            window.location.reload();
                        }, 1000);
                    }
    </script>
    <!-- Close the script -->

     <!-- javascript/jQuery to get data from table.php -->
     <script>
      // Fetch data from response.php using AJAX
      window.onload = function () {
          var xhr = new XMLHttpRequest();
          xhr.open('GET', 'table.php', true);
  
          xhr.onload = function () {
              if (xhr.status == 200) {
                  // Update the content of tbody with the fetched data
                  document.getElementById('typeOfUser').innerHTML = xhr.responseText;
              }
          };
  
          xhr.send();
      };
    </script>

    <script>
                   function myFunction() {
                    var input, filter, table, tr, td, i, txtValue;
                    input = document.getElementById("myInput");
                    filter = input.value.toUpperCase();
                    table = document.getElementById("myTable");
                    tr = table.getElementsByTagName("tr");
                    for (i = 1; i < tr.length; i++) {
                      td = tr[i].getElementsByTagName("td")[2];
                      if (td) {
                        txtValue = td.textContent || td.innerText;
                        if (txtValue.toUpperCase().indexOf(filter) > -1) {
                          tr[i].style.display = "";
                        } else {
                          tr[i].style.display = "none";
                        }
                      }       
                    }

                    
                  }
     </script> <!--close script-->

     <!-- Add these scripts to your existing code -->

<!-- JavaScript to handle filter -->
<script>
    function filterTable() {
        var inputId, inputName, inputTypeOfUser, inputPurpose, table, tr, tdId, tdName, tdTypeOfUser, tdPurpose, i;

        inputId = document.getElementById("filterById").value.toUpperCase();
        inputName = document.getElementById("filterByName").value.toUpperCase();
        inputTypeOfUser = document.getElementById("filterByTypeOfUser").value.toUpperCase();
        inputPurpose = document.getElementById("filterByPurpose").value.toUpperCase();

        table = document.getElementById("myTable");
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) {
            tdId = tr[i].getElementsByTagName("td")[0];
            tdName = tr[i].getElementsByTagName("td")[1];
            tdTypeOfUser = tr[i].getElementsByTagName("td")[3];
            tdPurpose = tr[i].getElementsByTagName("td")[5];

            if (tdId && tdName && tdTypeOfUser && tdPurpose) {
                var idValue = tdId.textContent || tdId.innerText;
                var nameValue = tdName.textContent || tdName.innerText;
                var typeOfUserValue = tdTypeOfUser.textContent || tdTypeOfUser.innerText;
                var purposeValue = tdPurpose.textContent || tdPurpose.innerText;

                // Check if the current row matches the user input for all four criteria
                var idMatch = idValue.toUpperCase().indexOf(inputId) > -1;
                var nameMatch = nameValue.toUpperCase().indexOf(inputName) > -1;
                var typeOfUserMatch = typeOfUserValue.toUpperCase().indexOf(inputTypeOfUser) > -1;
                var purposeMatch = purposeValue.toUpperCase().indexOf(inputPurpose) > -1;

                // Display the row if all four criteria match, otherwise hide the row
                if (idMatch && nameMatch && typeOfUserMatch && purposeMatch) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
</script>

<!-- JavaScript function for printing -->
<script>
    function printTable() {
        if (confirm("Are you sure you want to print this record?")) {
        var printWindow = window.open('', '_blank');
        printWindow.document.write('<html><head><title>Customer Response List</title></head><body>');
        printWindow.document.write('<h1 style="text-align: center;">Customer Response List</h1>');
        printWindow.document.write('<table border="1">');

        // Copy the table content to the print window
        var table = document.getElementById("myTable");
        for (var i = 0; i < table.rows.length; i++) {
            printWindow.document.write('<tr>');
            for (var j = 0; j < table.rows[i].cells.length; j++) {
                printWindow.document.write('<td>' + table.rows[i].cells[j].innerHTML + '</td>');
            }
            printWindow.document.write('</tr>');
        }

        printWindow.document.write('</table></body></html>');
        printWindow.document.close();
        printWindow.print();
    }
    }
</script>

<script>
    function deleteRow(responseID) {
        // Confirm before deleting
        if (confirm("Are you sure you want to delete this record?")) {
            // Send an AJAX request to delete.php with the responseID
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'delete.php?responseID=' + responseID, true);

            xhr.onload = function () {
                if (xhr.status == 200) {
                    // Reload the page after successful deletion
                    window.location.reload();
                }
            };

            xhr.send();
        }
    }
</script>



              </div> <!--class container-->
            </div> <!--banner section-->
          </div> <!--page banner-->
          <script src="/homepage/assets/js/jquery-3.5.1.min.js"></script>
          <script src="/homepage/assets/js/bootstrap.bundle.min.js"></script>

      <footer>
            <!-- copyright section start -->
      <div class="copyright_section">
        <div class="container">
           <p class="copyright_text">2023 All Rights Reserved. Design by <a href=#">Team Muizz</a></p>
        </div>
     </div>
     <!-- copyright section end -->

       </footer>
</body>
</html>